!function(){"use strict";angular.module("tp.facebook",[]).factory("FacebookService",function($q){var auth,appId="688876027827313",appBaseURL="https://beta.trippics.com";return{getAppBaseURL:function(){return appBaseURL},init:function(){openFB.init({appId:appId})},login:function(){var deferred=$q.defer();return openFB.login(function(response){"connected"===response.status?(auth=response.authResponse,console.log("Facebook login succeeded, got access token: "+auth.token),console.log(response),deferred.resolve()):console.log("Facebook login failed: "+auth.error)},{scope:"public_profile, email, user_friends, user_hometown, user_location, user_photos"}),deferred.promise},getAuth:function(){return auth},getTimestamp:function(){var deferred=$q.defer();return openFB.api({method:"GET",path:"/debug_token",params:{input_token:auth.token,access_token:auth.token},success:function(response){auth.expires=response.data.expires_at,deferred.resolve(auth.expires)},error:this.errorHandler}),deferred.promise},getInfo:function(){var deferred=$q.defer();return openFB.api({path:"/me",success:function(data){deferred.resolve(data)},error:this.errorHandler}),deferred.promise},shareMessage:function(){openFB.api({method:"POST",path:"/me/feed",params:{message:"Testing Facebook APIs"},success:function(){console.log("the item was posted on Facebook")},error:this.errorHandler})},revokePermissions:function(){openFB.revokePermissions(function(){console.log("Permissions revoked")},this.errorHandler)},logout:function(){openFB.logout(function(){console.log("Logout successful")},this.errorHandler)},errorHandler:function(error){console.log(error.message)}}})}();