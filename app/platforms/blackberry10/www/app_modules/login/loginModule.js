!function(){"use strict";angular.module("tp.login",["tp.user","tp.facebook"]).controller("LoginCtrl",function($scope,LoginService,UserService){$scope.loginWithFacebook=function(){LoginService.loginWithFacebook()},$scope.loginWithEmail=function(){$scope.user="searching...",LoginService.loginWithEmail($scope.form.username,$scope.form.password).then(function(response){UserService.setUser(response),$scope.user=UserService.getUser().first_name+" "+UserService.getUser().last_name,console.log(UserService.getUser())})}}).controller("LoginForgotPasswordCtrl",function(){}).factory("LoginService",function($http,$q,FacebookService){return{loginWithEmail:function(localUsername,localPassword){var deferred=$q.defer();return $http({method:"POST",url:"https://trippics.com/api/login/",data:{username:localUsername,password:localPassword}}).success(function(response){deferred.resolve(response)}),deferred.promise},loginWithFacebook:function(){FacebookService.init(),FacebookService.login()}}})}();